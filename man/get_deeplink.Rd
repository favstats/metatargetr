% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_media.R
\name{get_deeplink}
\alias{get_deeplink}
\title{Extract and flatten 'deeplinkAdCard' JSON from a Facebook Ad Library page}
\usage{
get_deeplink(ad_id, wait_sec = 4)
}
\arguments{
\item{ad_id}{Character string specifying the Facebook ad ID (as shown in the Ad Library URL).}

\item{wait_sec}{Seconds to wait for page to load (default 4). Increase if getting errors.}
}
\value{
A tibble with one row, containing flattened columns extracted from the deeplink JSON object.
Columns depend on the structure of the JSON and may include fields like \verb{fevInfo_*},
\verb{fevInfo_free_form_additional_info_*}, \verb{fevInfo_learn_more_content_*}, and snapshot-related columns.
}
\description{
This function programmatically retrieves the embedded JSON object labeled \code{deeplinkAdCard}
from the source code of a Facebook Ad Library ad page.
}
\details{
The function performs the following steps internally:
\enumerate{
\item Fetches the ad page HTML from Facebook's Ad Library using headless Chrome.
\item Locates the \verb{<script>} tag containing the \code{deeplinkAdCard} object.
\item Uses a recursive regular expression to extract the full JSON object following \code{deeplinkAdCard}.
\item Parses the JSON string into a nested R list.
\item Flattens the JSON into a tidy tibble row, unnesting nested sub-objects such as \code{fevInfo},
\code{free_form_additional_info}, \code{learn_more_content}, and optionally \code{snapshot} if present.
}

The output is designed for downstream analysis: each ad is represented as \strong{one row} in a tibble,
with nested JSON fields expanded into their own columns via \code{tidyr::unnest_wider()}.

This function complements \code{get_ad_snapshots()}, which extracts the \code{snapshot} JSON.
Use \code{get_deeplink()} when additional metadata embedded under \code{deeplinkAdCard} is required.
}
\examples{
\dontrun{
df <- get_deeplink("1103135646905363")
glimpse(df)
}

}
\seealso{
\code{\link[=get_ad_snapshots]{get_ad_snapshots()}} for extracting snapshot JSON; \code{\link[=detectmysnap]{detectmysnap()}} for raw JSON detection.
}
